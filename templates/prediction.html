<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Price Predictions - Stock Market Analyzer</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
    <style>
        .prediction-timeline {
            position: relative;
            padding-left: 30px;
        }
        .prediction-timeline::before {
            content: '';
            position: absolute;
            left: 15px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(to bottom, #28a745, #dc3545);
        }
        .timeline-item {
            position: relative;
            margin-bottom: 20px;
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -23px;
            top: 5px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #007bff;
        }
        .confidence-bar {
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
        }
        .confidence-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand mb-0 h1" href="{{ url_for('index') }}">
                <i class="fas fa-chart-line"></i> Stock Market Analyzer
            </a>
            <div class="navbar-nav">
                <a class="nav-link text-white" href="{{ url_for('index') }}">
                    <i class="fas fa-home"></i> Back to Home
                </a>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <!-- Prediction Header -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card bg-light">
                    <div class="card-body text-center">
                        <h2 class="card-title">
                            <i class="fas fa-robot"></i> AI Price Predictions
                        </h2>
                        <p class="card-text text-muted">
                            Machine Learning powered stock price forecasts using Random Forest algorithm
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Current Stock Info -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0" id="predictionSymbol">Stock Analysis</h5>
                    </div>
                    <div class="card-body">
                        <div class="row" id="currentStockInfo">
                            <!-- Current stock info will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Predictions Timeline -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i class="fas fa-calendar-alt"></i> 7-Day Price Forecast
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="prediction-timeline" id="predictionsTimeline">
                            <!-- Predictions timeline will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Prediction Chart -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="chart-container">
                    <h5 class="text-center mb-3">Price Prediction Chart</h5>
                    <div id="predictionChart"></div>
                </div>
            </div>
        </div>

        <!-- Prediction Insights -->
        <div class="row mb-4">
            <div class="col-md-6">
                <div class="card h-100">
                    <div class="card-header">
                        <h6 class="mb-0"><i class="fas fa-lightbulb"></i> Investment Insight</h6>
                    </div>
                    <div class="card-body">
                        <div id="investmentInsight">
                            <!-- Insight will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card h-100">
                    <div class="card-header">
                        <h6 class="mb-0"><i class="fas fa-exclamation-triangle"></i> Risk Assessment</h6>
                    </div>
                    <div class="card-body">
                        <div id="riskAssessment">
                            <!-- Risk assessment will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Technical Analysis Summary -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-chart-bar"></i> Technical Analysis Summary</h5>
                    </div>
                    <div class="card-body">
                        <div class="row" id="technicalSummary">
                            <!-- Technical summary will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="row mb-4">
            <div class="col-12 text-center">
                <button class="btn btn-primary me-2" onclick="goToAnalysis()">
                    <i class="fas fa-chart-bar"></i> Full Analysis
                </button>
                <button class="btn btn-success me-2" onclick="analyzeNewStock()">
                    <i class="fas fa-search"></i> Analyze Another Stock
                </button>
                <button class="btn btn-info" onclick="window.print()">
                    <i class="fas fa-print"></i> Print Report
                </button>
            </div>
        </div>

        <!-- Disclaimer -->
        <div class="row">
            <div class="col-12">
                <div class="alert alert-warning">
                    <h6><i class="fas fa-exclamation-circle"></i> Disclaimer</h6>
                    <p class="mb-0 small">
                        These predictions are generated by machine learning models and should not be considered as financial advice. 
                        Stock market investments are subject to risks. Always conduct your own research and consult with a financial 
                        advisor before making investment decisions. Past performance is not indicative of future results.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="{{ url_for('static', filename='js/prediction.js') }}"></script>
</body>
</html>